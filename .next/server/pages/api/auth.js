"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth";
exports.ids = ["pages/api/auth"];
exports.modules = {

/***/ "(api-node)/./lib/ironSessionConfig.ts":
/*!**********************************!*\
  !*** ./lib/ironSessionConfig.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ironSessionOptions: () => (/* binding */ ironSessionOptions)\n/* harmony export */ });\n// lib/ironSessionConfig.ts\nconst ironSessionOptions = {\n    cookieName: 'feishu_auth',\n    password: process.env.SESSION_PASSWORD,\n    cookieOptions: {\n        secure: \"development\" === 'production',\n        maxAge: 60 * 60 * 24 * 7 // 1周有效期\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9pcm9uU2Vzc2lvbkNvbmZpZy50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsMkJBQTJCO0FBR3BCLE1BQU1BLHFCQUF5QztJQUNwREMsWUFBWTtJQUNaQyxVQUFVQyxRQUFRQyxHQUFHLENBQUNDLGdCQUFnQjtJQUN0Q0MsZUFBZTtRQUNiQyxRQUFRSixrQkFBeUI7UUFDakNLLFFBQVEsS0FBSyxLQUFLLEtBQUssRUFBRSxRQUFRO0lBQ25DO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsiRTpcXGFpX3N0dWR5XFxmZWlzaHVhcHBcXGxpYlxcaXJvblNlc3Npb25Db25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbGliL2lyb25TZXNzaW9uQ29uZmlnLnRzXHJcbmltcG9ydCB7IElyb25TZXNzaW9uT3B0aW9ucyB9IGZyb20gJ2lyb24tc2Vzc2lvbidcclxuXHJcbmV4cG9ydCBjb25zdCBpcm9uU2Vzc2lvbk9wdGlvbnM6IElyb25TZXNzaW9uT3B0aW9ucyA9IHtcclxuICBjb29raWVOYW1lOiAnZmVpc2h1X2F1dGgnLCAvLyDlhbPplK7kv67lpI3ngrlbM10oQHJlZilcclxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuU0VTU0lPTl9QQVNTV09SRCEsXHJcbiAgY29va2llT3B0aW9uczoge1xyXG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxyXG4gICAgbWF4QWdlOiA2MCAqIDYwICogMjQgKiA3IC8vIDHlkajmnInmlYjmnJ9cclxuICB9XHJcbn0iXSwibmFtZXMiOlsiaXJvblNlc3Npb25PcHRpb25zIiwiY29va2llTmFtZSIsInBhc3N3b3JkIiwicHJvY2VzcyIsImVudiIsIlNFU1NJT05fUEFTU1dPUkQiLCJjb29raWVPcHRpb25zIiwic2VjdXJlIiwibWF4QWdlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./lib/ironSessionConfig.ts\n");

/***/ }),

/***/ "(api-node)/./lib/session.ts":
/*!************************!*\
  !*** ./lib/session.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSessionFromRedis: () => (/* binding */ getSessionFromRedis),\n/* harmony export */   renewSession: () => (/* binding */ renewSession),\n/* harmony export */   saveSessionToRedis: () => (/* binding */ saveSessionToRedis),\n/* harmony export */   sessionOptions: () => (/* binding */ sessionOptions)\n/* harmony export */ });\n/* harmony import */ var redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redis */ \"redis\");\n/* harmony import */ var redis__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(redis__WEBPACK_IMPORTED_MODULE_0__);\n// lib/session.ts\n\n// 修复协议错误的核心修改点\nconst getValidRedisUrl = (url)=>{\n    if (!url) throw new Error('KV_REST_API_URL is required');\n    if (!url.startsWith('redis://') && !url.startsWith('rediss://')) {\n        return `redis://${url}`;\n    }\n    return url;\n};\nconst redisClient = (0,redis__WEBPACK_IMPORTED_MODULE_0__.createClient)({\n    url: getValidRedisUrl(process.env.KV_REST_API_URL),\n    password: process.env.KV_REST_API_TOKEN,\n    socket: {\n        tls: process.env.KV_REST_API_URL?.startsWith('rediss://') ? true : false,\n        reconnectStrategy: (retries)=>Math.min(retries * 100, 3000),\n        connectTimeout: 5000\n    }\n});\nredisClient.on('error', (err)=>console.error('[Redis] Client Error:', err));\n// 添加连接状态检查\nasync function connectRedis() {\n    try {\n        if (!redisClient.isOpen) {\n            await redisClient.connect();\n            console.log('[Redis] 连接成功');\n        }\n    } catch (error) {\n        console.error('[Redis] 连接失败:', error);\n        throw error;\n    }\n}\nconnectRedis();\nconst sessionOptions = {\n    cookieName: 'feishu_auth',\n    password: process.env.COOKIE_PASSWORD,\n    cookieOptions: {\n        secure: \"development\" === 'production',\n        sameSite: 'lax',\n        httpOnly: true,\n        maxAge: 86400 // 24 hours\n    }\n};\nasync function getSessionFromRedis(sessionId) {\n    try {\n        await connectRedis();\n        const data = await redisClient.get(`session:${sessionId}`);\n        if (!data) return null;\n        const parsed = JSON.parse(data);\n        if (!parsed.id || !parsed.state) {\n            throw new Error('无效的会话数据格式');\n        }\n        return parsed;\n    } catch (error) {\n        console.error(`[Redis] 获取会话 ${sessionId} 失败:`, error);\n        return null;\n    }\n}\nasync function saveSessionToRedis(sessionId, data, maxAge = 86400) {\n    try {\n        await redisClient.setEx(sessionId, maxAge, JSON.stringify({\n            ...data,\n            lastAccessed: Date.now()\n        }));\n    } catch (error) {\n        console.error(`[Redis] Save session ${sessionId} failed:`, error);\n    }\n}\nasync function renewSession(sessionId, maxAge = 86400) {\n    try {\n        await redisClient.expire(sessionId, maxAge);\n    } catch (error) {\n        console.error(`[Redis] Renew session ${sessionId} failed:`, error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aXNodWFwcFxcbGliXFxzZXNzaW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGxpYi9zZXNzaW9uLnRzXHJcbmltcG9ydCB7IElyb25TZXNzaW9uT3B0aW9ucyB9IGZyb20gJ2lyb24tc2Vzc2lvbidcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAncmVkaXMnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25EYXRhIHtcclxuICBpZDogc3RyaW5nXHJcbiAgc3RhdGU6IHN0cmluZ1xyXG4gIGNvZGVWZXJpZmllcj86IHN0cmluZ1xyXG4gIHVzZXJUb2tlbj86IHN0cmluZ1xyXG4gIGxhc3RBY2Nlc3NlZD86IG51bWJlclxyXG59XHJcblxyXG4vLyDkv67lpI3ljY/orq7plJnor6/nmoTmoLjlv4Pkv67mlLnngrlcclxuY29uc3QgZ2V0VmFsaWRSZWRpc1VybCA9ICh1cmw/OiBzdHJpbmcpID0+IHtcclxuICBpZiAoIXVybCkgdGhyb3cgbmV3IEVycm9yKCdLVl9SRVNUX0FQSV9VUkwgaXMgcmVxdWlyZWQnKVxyXG4gIGlmICghdXJsLnN0YXJ0c1dpdGgoJ3JlZGlzOi8vJykgJiYgIXVybC5zdGFydHNXaXRoKCdyZWRpc3M6Ly8nKSkge1xyXG4gICAgcmV0dXJuIGByZWRpczovLyR7dXJsfWBcclxuICB9XHJcbiAgcmV0dXJuIHVybFxyXG59XHJcblxyXG5jb25zdCByZWRpc0NsaWVudCA9IGNyZWF0ZUNsaWVudCh7XHJcbiAgdXJsOiBnZXRWYWxpZFJlZGlzVXJsKHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1VSTCksXHJcbiAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1RPS0VOLFxyXG4gIHNvY2tldDoge1xyXG4gICAgdGxzOiBwcm9jZXNzLmVudi5LVl9SRVNUX0FQSV9VUkw/LnN0YXJ0c1dpdGgoJ3JlZGlzczovLycpID8gdHJ1ZSA6IGZhbHNlLFxyXG4gICAgcmVjb25uZWN0U3RyYXRlZ3k6IChyZXRyaWVzKSA9PiBNYXRoLm1pbihyZXRyaWVzICogMTAwLCAzMDAwKSxcclxuICAgIGNvbm5lY3RUaW1lb3V0OiA1MDAwXHJcbiAgfVxyXG59KVxyXG5cclxucmVkaXNDbGllbnQub24oJ2Vycm9yJywgKGVycikgPT4gY29uc29sZS5lcnJvcignW1JlZGlzXSBDbGllbnQgRXJyb3I6JywgZXJyKSlcclxuXHJcbi8vIOa3u+WKoOi/nuaOpeeKtuaAgeajgOafpVxyXG5hc3luYyBmdW5jdGlvbiBjb25uZWN0UmVkaXMoKSB7XHJcbiAgdHJ5IHtcclxuICAgIGlmICghcmVkaXNDbGllbnQuaXNPcGVuKSB7XHJcbiAgICAgIGF3YWl0IHJlZGlzQ2xpZW50LmNvbm5lY3QoKVxyXG4gICAgICBjb25zb2xlLmxvZygnW1JlZGlzXSDov57mjqXmiJDlip8nKVxyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdbUmVkaXNdIOi/nuaOpeWksei0pTonLCBlcnJvcilcclxuICAgIHRocm93IGVycm9yXHJcbiAgfVxyXG59XHJcbmNvbm5lY3RSZWRpcygpXHJcblxyXG5leHBvcnQgY29uc3Qgc2Vzc2lvbk9wdGlvbnM6IElyb25TZXNzaW9uT3B0aW9ucyA9IHtcclxuICBjb29raWVOYW1lOiAnZmVpc2h1X2F1dGgnLFxyXG4gIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5DT09LSUVfUEFTU1dPUkQhLFxyXG4gIGNvb2tpZU9wdGlvbnM6IHtcclxuICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcclxuICAgIHNhbWVTaXRlOiAnbGF4JyxcclxuICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgbWF4QWdlOiA4NjQwMCAvLyAyNCBob3Vyc1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNlc3Npb25Gcm9tUmVkaXMoc2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPFNlc3Npb25EYXRhIHwgbnVsbD4ge1xyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCBjb25uZWN0UmVkaXMoKVxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlZGlzQ2xpZW50LmdldChgc2Vzc2lvbjoke3Nlc3Npb25JZH1gKVxyXG4gICAgaWYgKCFkYXRhKSByZXR1cm4gbnVsbFxyXG4gICAgXHJcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGRhdGEpXHJcbiAgICBpZiAoIXBhcnNlZC5pZCB8fCAhcGFyc2VkLnN0YXRlKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcign5peg5pWI55qE5Lya6K+d5pWw5o2u5qC85byPJylcclxuICAgIH1cclxuICAgIHJldHVybiBwYXJzZWRcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgW1JlZGlzXSDojrflj5bkvJror50gJHtzZXNzaW9uSWR9IOWksei0pTpgLCBlcnJvcilcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2F2ZVNlc3Npb25Ub1JlZGlzKFxyXG4gIHNlc3Npb25JZDogc3RyaW5nLFxyXG4gIGRhdGE6IFNlc3Npb25EYXRhLFxyXG4gIG1heEFnZTogbnVtYmVyID0gODY0MDBcclxuKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IHJlZGlzQ2xpZW50LnNldEV4KHNlc3Npb25JZCwgbWF4QWdlLCBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgIC4uLmRhdGEsXHJcbiAgICAgIGxhc3RBY2Nlc3NlZDogRGF0ZS5ub3coKVxyXG4gICAgfSkpXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoYFtSZWRpc10gU2F2ZSBzZXNzaW9uICR7c2Vzc2lvbklkfSBmYWlsZWQ6YCwgZXJyb3IpXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZXdTZXNzaW9uKHNlc3Npb25JZDogc3RyaW5nLCBtYXhBZ2U6IG51bWJlciA9IDg2NDAwKSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IHJlZGlzQ2xpZW50LmV4cGlyZShzZXNzaW9uSWQsIG1heEFnZSlcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgW1JlZGlzXSBSZW5ldyBzZXNzaW9uICR7c2Vzc2lvbklkfSBmYWlsZWQ6YCwgZXJyb3IpXHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImdldFZhbGlkUmVkaXNVcmwiLCJ1cmwiLCJFcnJvciIsInN0YXJ0c1dpdGgiLCJyZWRpc0NsaWVudCIsInByb2Nlc3MiLCJlbnYiLCJLVl9SRVNUX0FQSV9VUkwiLCJwYXNzd29yZCIsIktWX1JFU1RfQVBJX1RPS0VOIiwic29ja2V0IiwidGxzIiwicmVjb25uZWN0U3RyYXRlZ3kiLCJyZXRyaWVzIiwiTWF0aCIsIm1pbiIsImNvbm5lY3RUaW1lb3V0Iiwib24iLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJjb25uZWN0UmVkaXMiLCJpc09wZW4iLCJjb25uZWN0IiwibG9nIiwic2Vzc2lvbk9wdGlvbnMiLCJjb29raWVOYW1lIiwiQ09PS0lFX1BBU1NXT1JEIiwiY29va2llT3B0aW9ucyIsInNlY3VyZSIsInNhbWVTaXRlIiwiaHR0cE9ubHkiLCJtYXhBZ2UiLCJnZXRTZXNzaW9uRnJvbVJlZGlzIiwic2Vzc2lvbklkIiwiZGF0YSIsImdldCIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsImlkIiwic3RhdGUiLCJzYXZlU2Vzc2lvblRvUmVkaXMiLCJzZXRFeCIsInN0cmluZ2lmeSIsImxhc3RBY2Nlc3NlZCIsIkRhdGUiLCJub3ciLCJyZW5ld1Nlc3Npb24iLCJleHBpcmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/session.ts\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_auth_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\auth.ts */ \"(api-node)/./pages/api/auth.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_auth_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_auth_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_auth_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/auth\",\n        pathname: \"/api/auth\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_auth_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGYXV0aCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYXV0aC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNrRDtBQUNsRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsK0NBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLCtDQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGF1dGgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2F1dGhcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/auth.ts":
/*!***************************!*\
  !*** ./pages/api/auth.ts ***!
  \***************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var iron_session__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! iron-session */ \"iron-session\");\n/* harmony import */ var _lib_ironSessionConfig__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/ironSessionConfig */ \"(api-node)/./lib/ironSessionConfig.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var _lib_session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/session */ \"(api-node)/./lib/session.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([iron_session__WEBPACK_IMPORTED_MODULE_0__, uuid__WEBPACK_IMPORTED_MODULE_2__]);\n([iron_session__WEBPACK_IMPORTED_MODULE_0__, uuid__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n// pages/api/auth.ts\n\n\n\n\n// 环境验证（网页5安全要求）\nconst validateEnv = ()=>{\n    if (!process.env.SESSION_PASSWORD) throw new Error('SESSION_PASSWORD 未配置');\n    if (!process.env.FEISHU_CLIENT_ID) throw new Error('FEISHU_CLIENT_ID 未配置');\n    if (!process.env.FEISHU_CLIENT_SECRET) throw new Error('FEISHU_CLIENT_SECRET 未配置');\n};\nasync function handler(req, res) {\n    try {\n        validateEnv() // 前置环境检查\n        ;\n        console.log(`[Auth] 请求方法: ${req.method}, 路径: ${req.url}`);\n        // 初始化会话（关键修复点）\n        const session = await (0,iron_session__WEBPACK_IMPORTED_MODULE_0__.getIronSession)(req, res, _lib_ironSessionConfig__WEBPACK_IMPORTED_MODULE_1__.ironSessionOptions);\n        // 强制生成会话ID（解决网页6问题）\n        if (!session.id) {\n            session.id = (0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)();\n            await session.save();\n            console.log('[Session] 生成新会话ID:', session.id);\n        }\n        // 生成state参数（网页7安全实践）\n        const state = (0,uuid__WEBPACK_IMPORTED_MODULE_2__.v4)();\n        session.state = state;\n        await session.save();\n        // Redis存储验证（网页8调试要求）\n        const redisData = await (0,_lib_session__WEBPACK_IMPORTED_MODULE_3__.getSessionFromRedis)(session.id);\n        console.log(`[Redis] 存储验证: ${redisData ? '成功' : '初始化'}`);\n        // 构建认证URL（网页9飞书集成）\n        const authUrl = new URL('https://accounts.feishu.cn/open-apis/authen/v1/authorize');\n        authUrl.searchParams.append('response_type', 'code');\n        authUrl.searchParams.append('client_id', process.env.FEISHU_CLIENT_ID);\n        authUrl.searchParams.append('redirect_uri',  false ? 0 : process.env.FEISHU_REDIRECT_URI);\n        authUrl.searchParams.append('state', state);\n        authUrl.searchParams.append('scope', 'contact:contact.base:readonly');\n        res.redirect(authUrl.toString());\n        return;\n    } catch (error) {\n        console.error('[ERROR] 认证异常:', error);\n        res.status(500).json({\n            error: '服务端错误',\n            message: error.message,\n            ... true && {\n                stack: error.stack\n            }\n        });\n        return;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9hdXRoLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsb0JBQW9CO0FBRXlCO0FBQ2dDO0FBQzFDO0FBQ29CO0FBRXZELGdCQUFnQjtBQUNoQixNQUFNSyxjQUFjO0lBQ2xCLElBQUksQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxnQkFBZ0IsRUFBRSxNQUFNLElBQUlDLE1BQU07SUFDbkQsSUFBSSxDQUFDSCxRQUFRQyxHQUFHLENBQUNHLGdCQUFnQixFQUFFLE1BQU0sSUFBSUQsTUFBTTtJQUNuRCxJQUFJLENBQUNILFFBQVFDLEdBQUcsQ0FBQ0ksb0JBQW9CLEVBQUUsTUFBTSxJQUFJRixNQUFNO0FBQ3pEO0FBRWUsZUFBZUcsUUFDNUJDLEdBQW1CLEVBQ25CQyxHQUFvQjtJQUVwQixJQUFJO1FBQ0ZULGNBQWMsU0FBUzs7UUFFdkJVLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGFBQWEsRUFBRUgsSUFBSUksTUFBTSxDQUFDLE1BQU0sRUFBRUosSUFBSUssR0FBRyxFQUFFO1FBRXhELGVBQWU7UUFDZixNQUFNQyxVQUFVLE1BQU1uQiw0REFBY0EsQ0FBY2EsS0FBS0MsS0FBS2Isc0VBQWtCQTtRQUU5RSxvQkFBb0I7UUFDcEIsSUFBSSxDQUFDa0IsUUFBUUMsRUFBRSxFQUFFO1lBQ2ZELFFBQVFDLEVBQUUsR0FBR2pCLHdDQUFNQTtZQUNuQixNQUFNZ0IsUUFBUUUsSUFBSTtZQUNsQk4sUUFBUUMsR0FBRyxDQUFDLHNCQUFzQkcsUUFBUUMsRUFBRTtRQUM5QztRQUVBLHFCQUFxQjtRQUNyQixNQUFNRSxRQUFRbkIsd0NBQU1BO1FBQ3BCZ0IsUUFBUUcsS0FBSyxHQUFHQTtRQUNoQixNQUFNSCxRQUFRRSxJQUFJO1FBRWxCLHFCQUFxQjtRQUNyQixNQUFNRSxZQUFZLE1BQU1uQixpRUFBbUJBLENBQUNlLFFBQVFDLEVBQUU7UUFDdERMLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGNBQWMsRUFBRU8sWUFBWSxPQUFPLE9BQU87UUFFdkQsbUJBQW1CO1FBQ25CLE1BQU1DLFVBQVUsSUFBSUMsSUFBSTtRQUN4QkQsUUFBUUUsWUFBWSxDQUFDQyxNQUFNLENBQUMsaUJBQWlCO1FBQzdDSCxRQUFRRSxZQUFZLENBQUNDLE1BQU0sQ0FBQyxhQUFhckIsUUFBUUMsR0FBRyxDQUFDRyxnQkFBZ0I7UUFDckVjLFFBQVFFLFlBQVksQ0FBQ0MsTUFBTSxDQUFDLGdCQUMxQnJCLE1BQXFDLEdBQ2pDQSxDQUErQixHQUMvQkEsUUFBUUMsR0FBRyxDQUFDcUIsbUJBQW1CO1FBRXJDSixRQUFRRSxZQUFZLENBQUNDLE1BQU0sQ0FBQyxTQUFTTDtRQUNyQ0UsUUFBUUUsWUFBWSxDQUFDQyxNQUFNLENBQUMsU0FBUztRQUVyQ2IsSUFBSWUsUUFBUSxDQUFDTCxRQUFRTSxRQUFRO1FBQzdCO0lBRUYsRUFBRSxPQUFPQyxPQUFZO1FBQ25CaEIsUUFBUWdCLEtBQUssQ0FBQyxpQkFBaUJBO1FBQy9CakIsSUFBSWtCLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJGLE9BQU87WUFDUEcsU0FBU0gsTUFBTUcsT0FBTztZQUN0QixHQUFJNUIsS0FBc0MsSUFBSTtnQkFBRTZCLE9BQU9KLE1BQU1JLEtBQUs7WUFBQyxDQUFDO1FBQ3RFO1FBQ0E7SUFDRjtBQUNGIiwic291cmNlcyI6WyJFOlxcYWlfc3R1ZHlcXGZlaXNodWFwcFxccGFnZXNcXGFwaVxcYXV0aC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9hcGkvYXV0aC50c1xyXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCdcclxuaW1wb3J0IHsgZ2V0SXJvblNlc3Npb24gfSBmcm9tICdpcm9uLXNlc3Npb24nXHJcbmltcG9ydCB7IGlyb25TZXNzaW9uT3B0aW9ucywgU2Vzc2lvbkRhdGEgfSBmcm9tICcuLi8uLi9saWIvaXJvblNlc3Npb25Db25maWcnXHJcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnXHJcbmltcG9ydCB7IGdldFNlc3Npb25Gcm9tUmVkaXMgfSBmcm9tICcuLi8uLi9saWIvc2Vzc2lvbidcclxuXHJcbi8vIOeOr+Wig+mqjOivge+8iOe9kemhtTXlronlhajopoHmsYLvvIlcclxuY29uc3QgdmFsaWRhdGVFbnYgPSAoKSA9PiB7XHJcbiAgaWYgKCFwcm9jZXNzLmVudi5TRVNTSU9OX1BBU1NXT1JEKSB0aHJvdyBuZXcgRXJyb3IoJ1NFU1NJT05fUEFTU1dPUkQg5pyq6YWN572uJylcclxuICBpZiAoIXByb2Nlc3MuZW52LkZFSVNIVV9DTElFTlRfSUQpIHRocm93IG5ldyBFcnJvcignRkVJU0hVX0NMSUVOVF9JRCDmnKrphY3nva4nKVxyXG4gIGlmICghcHJvY2Vzcy5lbnYuRkVJU0hVX0NMSUVOVF9TRUNSRVQpIHRocm93IG5ldyBFcnJvcignRkVJU0hVX0NMSUVOVF9TRUNSRVQg5pyq6YWN572uJylcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXHJcbikge1xyXG4gIHRyeSB7XHJcbiAgICB2YWxpZGF0ZUVudigpIC8vIOWJjee9rueOr+Wig+ajgOafpVxyXG5cclxuICAgIGNvbnNvbGUubG9nKGBbQXV0aF0g6K+35rGC5pa55rOVOiAke3JlcS5tZXRob2R9LCDot6/lvoQ6ICR7cmVxLnVybH1gKVxyXG4gICAgXHJcbiAgICAvLyDliJ3lp4vljJbkvJror53vvIjlhbPplK7kv67lpI3ngrnvvIlcclxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRJcm9uU2Vzc2lvbjxTZXNzaW9uRGF0YT4ocmVxLCByZXMsIGlyb25TZXNzaW9uT3B0aW9ucylcclxuICAgIFxyXG4gICAgLy8g5by65Yi255Sf5oiQ5Lya6K+dSUTvvIjop6PlhrPnvZHpobU26Zeu6aKY77yJXHJcbiAgICBpZiAoIXNlc3Npb24uaWQpIHtcclxuICAgICAgc2Vzc2lvbi5pZCA9IHV1aWR2NCgpXHJcbiAgICAgIGF3YWl0IHNlc3Npb24uc2F2ZSgpXHJcbiAgICAgIGNvbnNvbGUubG9nKCdbU2Vzc2lvbl0g55Sf5oiQ5paw5Lya6K+dSUQ6Jywgc2Vzc2lvbi5pZClcclxuICAgIH1cclxuXHJcbiAgICAvLyDnlJ/miJBzdGF0ZeWPguaVsO+8iOe9kemhtTflronlhajlrp7ot7XvvIlcclxuICAgIGNvbnN0IHN0YXRlID0gdXVpZHY0KClcclxuICAgIHNlc3Npb24uc3RhdGUgPSBzdGF0ZVxyXG4gICAgYXdhaXQgc2Vzc2lvbi5zYXZlKClcclxuXHJcbiAgICAvLyBSZWRpc+WtmOWCqOmqjOivge+8iOe9kemhtTjosIPor5XopoHmsYLvvIlcclxuICAgIGNvbnN0IHJlZGlzRGF0YSA9IGF3YWl0IGdldFNlc3Npb25Gcm9tUmVkaXMoc2Vzc2lvbi5pZClcclxuICAgIGNvbnNvbGUubG9nKGBbUmVkaXNdIOWtmOWCqOmqjOivgTogJHtyZWRpc0RhdGEgPyAn5oiQ5YqfJyA6ICfliJ3lp4vljJYnfWApXHJcblxyXG4gICAgLy8g5p6E5bu66K6k6K+BVVJM77yI572R6aG1OemjnuS5pumbhuaIkO+8iVxyXG4gICAgY29uc3QgYXV0aFVybCA9IG5ldyBVUkwoJ2h0dHBzOi8vYWNjb3VudHMuZmVpc2h1LmNuL29wZW4tYXBpcy9hdXRoZW4vdjEvYXV0aG9yaXplJylcclxuICAgIGF1dGhVcmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgncmVzcG9uc2VfdHlwZScsICdjb2RlJylcclxuICAgIGF1dGhVcmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnY2xpZW50X2lkJywgcHJvY2Vzcy5lbnYuRkVJU0hVX0NMSUVOVF9JRClcclxuICAgIGF1dGhVcmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgncmVkaXJlY3RfdXJpJywgXHJcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgXHJcbiAgICAgICAgPyBwcm9jZXNzLmVudi5GRUlTSFVfUkVESVJFQ1RfVVJJIVxyXG4gICAgICAgIDogcHJvY2Vzcy5lbnYuRkVJU0hVX1JFRElSRUNUX1VSSSFcclxuICAgIClcclxuICAgIGF1dGhVcmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnc3RhdGUnLCBzdGF0ZSlcclxuICAgIGF1dGhVcmwuc2VhcmNoUGFyYW1zLmFwcGVuZCgnc2NvcGUnLCAnY29udGFjdDpjb250YWN0LmJhc2U6cmVhZG9ubHknKVxyXG5cclxuICAgIHJlcy5yZWRpcmVjdChhdXRoVXJsLnRvU3RyaW5nKCkpXHJcbiAgICByZXR1cm5cclxuXHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcignW0VSUk9SXSDorqTor4HlvILluLg6JywgZXJyb3IpXHJcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgIGVycm9yOiAn5pyN5Yqh56uv6ZSZ6K+vJyxcclxuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgLi4uKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHsgc3RhY2s6IGVycm9yLnN0YWNrIH0pXHJcbiAgICB9KVxyXG4gICAgcmV0dXJuXHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbImdldElyb25TZXNzaW9uIiwiaXJvblNlc3Npb25PcHRpb25zIiwidjQiLCJ1dWlkdjQiLCJnZXRTZXNzaW9uRnJvbVJlZGlzIiwidmFsaWRhdGVFbnYiLCJwcm9jZXNzIiwiZW52IiwiU0VTU0lPTl9QQVNTV09SRCIsIkVycm9yIiwiRkVJU0hVX0NMSUVOVF9JRCIsIkZFSVNIVV9DTElFTlRfU0VDUkVUIiwiaGFuZGxlciIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJsb2ciLCJtZXRob2QiLCJ1cmwiLCJzZXNzaW9uIiwiaWQiLCJzYXZlIiwic3RhdGUiLCJyZWRpc0RhdGEiLCJhdXRoVXJsIiwiVVJMIiwic2VhcmNoUGFyYW1zIiwiYXBwZW5kIiwiRkVJU0hVX1JFRElSRUNUX1VSSSIsInJlZGlyZWN0IiwidG9TdHJpbmciLCJlcnJvciIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwic3RhY2siXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/auth.ts\n");

/***/ }),

/***/ "iron-session":
/*!*******************************!*\
  !*** external "iron-session" ***!
  \*******************************/
/***/ ((module) => {

module.exports = import("iron-session");;

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "redis":
/*!************************!*\
  !*** external "redis" ***!
  \************************/
/***/ ((module) => {

module.exports = require("redis");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

module.exports = import("uuid");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fauth&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cauth.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();